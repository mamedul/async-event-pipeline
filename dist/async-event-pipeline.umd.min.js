!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Hooker=t()}(this,function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}
/**
	 * @license MIT
	 * @author Mamedul Islam <https://mamedul.github.io>
	 * @version 2025.9.80
	 */var t,n;var o=(n||(n=1,t=class{#e=[];add(e){if("function"!=typeof e&&("object"!=typeof e||null===e))throw new TypeError("Task must be a function or class or object.");return this.#e.push(e),this}use(e){return this.add(e)}async execute(e){let t=-1;const n=async(e,o)=>{if(e===t)throw new Error("next() called multiple times in the same task.");if(t=e,e>=this.#e.length)return o;const s=this.#e[e];return new Promise((t,r)=>{const i=(s,i)=>{if(s)return r(s);t(n(e+1,void 0!==i?i:o))};try{if("function"==typeof s)/^class\s/.test(Function.prototype.toString.call(s))?new s(o,i):s(o,i);else if("object"==typeof s){if("function"!=typeof s.handle)throw new TypeError("Object tasks must implement a handle(data, next) method.");s.handle(o,i)}}catch(e){r(e)}})};return n(0,e)}exec(e){return this.execute(e)}}),t);return e(o)});
